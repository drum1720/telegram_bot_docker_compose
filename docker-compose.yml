version: '3.8'
volumes:
  postgres_data:
services:
  telegramm-bot-listener:
    build: ./TelegramBotListener/
    depends_on:
      - rifma-search
      - image-downloader
      - image-handler
  rifma-search:
    build: ./rifmaSearch/
    ports:
      - 8022:8022
    depends_on:
      - db
  image-downloader:
    build: ./pixabayImageDownloader/
    ports:
      - 8020:8020
  image-handler:
    build: ./imageHandler/
    ports:
      - 8021:8021
  db:
    restart: always
    image: postgres:latest
    volumes:
      - postgres_data:/var/lib/postgresql/data
    environment:
      - POSTGRES_PASSWORD=
      - POSTGRES_USER=drum
      - POSTGRES_DB=rifmaapi
    ports:
      - 5432:5432
